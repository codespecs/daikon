<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <title>Eclipse Setup for PAG Members</title>
</head>

<body>
<h1>Eclipse Setup for PAG Members</h1>

<p>Contents:</p>
<!-- start toc.  do not edit; run html-update-toc instead -->
    <ul>
      <li><a href="#startup">Start up Eclipse</a></li>
      <li><a href="#existing-projects">Work on existing coding projects</a>
        <ul>
          <li><a href="#importing-daikon">Importing Daikon</a></li>
          <li><a href="#existing-old">Importing a different existing project</a></li>
        </ul></li>
      <li><a href="#external-tools">Interaction with external tools</a></li>
      <li><a href="#debugger">Using the Eclipse debugger</a></li>
      <li><a href="#cvs">Using CVS with Eclipse</a></li>
    </ul>
<!-- end toc -->


<h2><a name="startup">Start up Eclipse</a></h2>

<p>All the PAG machines should have Eclipse installed. You simply run
the command <tt>eclipse</tt> at the command shell.</p>

<p>There is one big catch:  take note of where you launch Eclipse and
<b>always</b> launch Eclipse from the same location. For example, you might
want to alias run-eclipse with '<tt>cd $HOME; eclipse</tt>'.
For convenience, this is already done for you if you source the pag-daikon
startup scripts.
There are ways around the launch location inconvenience, such as
the -data switch, but the alias trick should be the simplest and least
confusing workaround.</p>

<p>
It is strongly recommended that you make the following customizations to Eclipse:
</p>
<pre>
Window >> Preferences >> Workbench >> Refresh Workspace on Starup
Window >> Preferences >> Java >> Compiler >> Problems >> Unused imports >> Ignore
Window >> Preferences >> Java >> Compiler >> Style >> Non-static access >> >> Ignore
</pre>


<h2><a name="existing-projects">Work on existing coding projects</a></h2>

<h3><a name="importing-daikon">Importing Daikon</a></h3>

<p>
First, do <tt>cp $inv/java/.classpath-pag $inv/java/.classpath</tt>
</p>

<p>
Second, import Daikon into Eclipse.  To import:  start Eclipse, then choose
menu item File->Import->ExistingProjectIntoWorkspace, then enter (the full
name of) directory <tt>$inv/java</tt> for Project Contents.
</p>

<p>
Those two steps are all there is to it!
</p>

<p>
(This simple procedure works because there are already
<tt>.project</tt> and <tt>.classpath</tt> files in <tt>$inv/java</tt>.
To import a project that doesn't have these files, you would need to create
them (for instance, copy them from Daikon's), or else follow a different
procedure to work on your project in Eclipse.)
</p>

<h3><a name="existing-old">Importing a different existing project</a></h3>

<p>(This is the most annoying and error prone part.  I will add screenshots
soon.)
</p>

<p>Before working on code in Eclipse, you must import the code into
the Eclipse workspace.  You also need to set up various compilation
settings and specify jars and classes that should be in the
compilation classpath.  (By default, Eclipse does not use your
environment Classpath.)</p>

<ol>
<li>Change to the Java perspective by selecting "Java Perspective" in
the perspective menu on the far-left tool panel.  You should see some
of the windows move around to a structure similar to the screenshot
below.</li>

<li> Select the menu item File->New->Project</li>

<li> On the popup window, select Java Project and click Next</li>

<li> Call the project 'Daikon' or some other appropriate name and
click Next.</li>

<li> On the next window, create a new folder in
the project called 'src', and answer Yes to the next dialog box asking
you to confirm a change in the build directory. Select Ok and you
should see the new Project as a small folder icon in the package
explorer.</li>

<li> Select the menu item File->Import</li>

<li> On the next popup window, select "File System" and click
Next. Browse to the folder containing your source code.  Using the
standard PAG setup, the folder should be $INV/java. The import
destination should be Daikon/src.  Check the boxes for including
daikon, jtb, and plume.</li>

<li> Finally, add the required jars for Daikon by right-clicking on
the project and selecting the Properties menu.  Select "Java Build
Path", then "Libraries", then "Add External Jars" and add tools.jar,
junit.jar, jakarta-oro.jar, and java-getopt.jar.  (See your CLASSPATH
environment variable for full pathnames to these files.)</li>
</ol>

<p>
Note that if you follow these directions, then
<b>the compiled classes do not appear in the directory from
which you imported in the previous step</b>.
Instead, the compiled classes appear in the Eclipse workspace
directory. If you followed the setup instructions above, then the
compiled code will be in "$HOME/.eclipse/Daikon/bin", which you
should add to your CLASSPATH in order to use the updates you make from
Eclipse.
</p>


<h2><a name="external-tools">Interaction with external tools</a></h2>

<p>Eclipse compiles your project whenever you save.
However, it parses frequently during editing and issues most or all of the
errors and warnings that the compiler would have.  In order to clear a
warning/error (in the Task List), you must save the file, however.
</p>

<p>
If you change files outside Eclipse, you should refresh Eclipse, via
right-clicking on the project or via menu item File >> Refresh.
</p>


<h2><a name="debugger">Using the Eclipse debugger</a></h2>

<p>To begin debugging, you can click on the bug icon in the toolbar or
select Run->Debug from the menu.  You will see the same window as if
you selected Run->Run, but when the Java application launches, Eclipse
will switch to the Debugging Perspective, which reveals many windows
such as the stack trace window, the variable values window, and the
step control panel.</p>

<p>Debugging features (window locations given for default setup):</p>

<ul>
<li>Breakpoints: You can add breakpoints during editing by
double-clicking on the left margin area of the source code.  When
debugging, the program halts when it reaches a breakpoint.
</li>

<li>Stack Trace: Once the program halts at a breakpoint, the window
in the upper-left corner window show the stack trace.
</li>

<li>Step Controls: Once the program halts at a breakpoint, the panels
just below the stack trace allow you to step through the code one line
at a time (step over), resume execution as normal (resume), step down
into a method call (step into), or execute until leaving the current
method (Step return).
</li>

<li>Variables: On the top right window, there is a tab pane that displays
the values of objects and fields during a breakpoint halt.  You can also
type in any legal java expression that could appear at the breakpoint
and the window will display the value of the expression (don't forget to
put a semi-colon at the end of your expression!).
</li>
</ul>

<h2><a name="cvs">Using CVS with Eclipse</a></h2>

<p>TODO, although you can just do all the editing, compiling, and
running from the Eclipse IDE while doing CVS commands from the shell
or whatever current system you use.
</p>

<hr />

<p><a href="./">Using Daikon at MIT</a></p>

</body>
</html>
